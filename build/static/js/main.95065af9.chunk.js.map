{"version":3,"sources":["Post.js","firebase.js","ImageUpload.js","App.js","reportWebVitals.js","index.js"],"names":["Post","username","caption","imageUrl","className","Avatar","src","alt","db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","storage","ImageUpload","useState","image","setImage","setUrl","progress","setProgress","setCaption","value","max","Input","placeholder","onChange","e","target","type","files","Button","onClick","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","url","collection","add","timestamp","FieldValue","serverTimestamp","getModalStyle","top","left","transform","useStyles","makeStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","padding","spacing","App","classes","posts","setPosts","React","modalStyle","openSignIn","setOpenSignIn","open","setOpen","setUsername","email","setEmail","password","setPassword","user","setUser","useEffect","unsubscribe","onAuthStateChanged","authUser","orderBy","onSnapshot","docs","map","doc","id","post","data","displayName","Modal","onClose","style","preventDefault","createUserWithEmailAndPassword","updateProfile","catch","alert","message","signInWithEmailAndPassword","signOut","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.95065af9.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Post.css';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\nfunction Post({username, caption, imageUrl}) {\r\n    return (\r\n        <div className=\"post\">\r\n\r\n            <div className=\"post__header\">\r\n\r\n            <Avatar className=\"post__avatar\" src=\"post.jpg\"/>\r\n\r\n            <h3>{username}</h3>\r\n\r\n            </div>\r\n\r\n\r\n            <img className=\"post__image\" src={imageUrl} alt=\"Postimage\"></img>\r\n            \r\n            <h4 className=\"post__caption\"> <strong>{username}</strong>{caption}</h4>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post\r\n","import firebase  from \"firebase\";\r\n\r\nconst firebaseApp = firebase.initializeApp({\r\n\r\n    apiKey: \"AIzaSyDdMyMZbpgejdPomTG2HJiebP1pDWrbybk\",\r\n    authDomain: \"instagram-clone-react-e1309.firebaseapp.com\",\r\n    projectId: \"instagram-clone-react-e1309\",\r\n    storageBucket: \"instagram-clone-react-e1309.appspot.com\",\r\n    messagingSenderId: \"543573824056\",\r\n    appId: \"1:543573824056:web:b46455b4800bfa96108ccd\",\r\n    measurementId: \"G-14867TFB6Q\"\r\n\r\n\r\n});\r\n\r\nconst db = firebaseApp.firestore();\r\nconst auth = firebase.auth();\r\nconst storage = firebase.storage();\r\n\r\n\r\n  export {db, auth, storage}; ","import React, { useState } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport { storage, db } from \"./firebase\";\r\nimport \"./ImageUpload.css\";\r\nimport { Input, Button } from \"@material-ui/core\";\r\n\r\nconst ImageUpload = ({ username }) => {\r\n  const [image, setImage] = useState(null);\r\n  const [url, setUrl] = useState(\"\");\r\n  const [progress, setProgress] = useState(0);\r\n  const [caption, setCaption] = useState(\"\");\r\n\r\n  const handleChange = (e) => {\r\n    if (e.target.files[0]) {\r\n      setImage(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleUpload = () => {\r\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapshot) => {\r\n        // progress function ...\r\n        const progress = Math.round(\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n        );\r\n        setProgress(progress);\r\n      },\r\n      (error) => {\r\n        // Error function ...\r\n        console.log(error);\r\n      },\r\n      () => {\r\n        // complete function ...\r\n        storage\r\n          .ref(\"images\")\r\n          .child(image.name)\r\n          .getDownloadURL()\r\n          .then((url) => {\r\n            setUrl(url);\r\n\r\n            // post image inside db\r\n            db.collection(\"posts\").add({\r\n              imageUrl: url,\r\n              caption: caption,\r\n              username: username,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            });\r\n\r\n            setProgress(0);\r\n            setCaption(\"\");\r\n            setImage(null);\r\n          });\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"imageupload\">\r\n      <progress className=\"imageupload__progress\" value={progress} max=\"100\" />\r\n      <Input\r\n        placeholder=\"Enter a caption\"\r\n        value={caption}\r\n        onChange={(e) => setCaption(e.target.value)}\r\n      />\r\n      <div>\r\n        <input type=\"file\" onChange={handleChange} />\r\n        <Button className=\"imageupload__button\" onClick={handleUpload}>\r\n          Upload\r\n        </Button>\r\n      </div>\r\n\r\n      <br />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;","import './App.css';\nimport React, {useState, useEffect} from 'react';\nimport Post from './Post.js';\nimport {db, auth} from './firebase';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Button from '@material-ui/core/Button';\nimport { Input } from '@material-ui/core';\nimport ImageUpload from './ImageUpload';\n\n\n\nfunction getModalStyle() {\n  const top = 50;\n const left = 50;\n\n return {\n   top: `${top}%`,\n   left: `${left}%`,\n   transform: `translate(-${top}%, -${left}%)`,\n\n };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: 'theme.shadows[5]',\n    padding: theme.spacing(2,4,3),\n\n  },\n}));\n\n\n\n\nfunction App() {\n\n\n  const classes = useStyles();\n  const [posts,setPosts] = useState([]);\n  const [modalStyle] = React.useState(getModalStyle);\n  const [openSignIn, setOpenSignIn] = useState(false);\n  const [open,setOpen] = useState(false);\n  const [username,setUsername] = useState('');\n  const [email,setEmail] = useState('');\n  const [password,setPassword] = useState('');\n  const [user,setUser] = useState(null);\n\n\n  useEffect(() => {\n\n    const unsubscribe =auth.onAuthStateChanged((authUser)=> {\n      if (authUser){\n        console.log(authUser);\n        setUser(authUser);\n      }\n     else{\n        setUser(null);\n\n      }\n    })\n\n    return () => {\n      unsubscribe();\n    }; \n\n  }, [username, user]);\n\n\n\n  useEffect(() => {\n \n    db.collection('posts').orderBy('timestamp','desc' ).onSnapshot(snapshot => {\n      setPosts(snapshot.docs.map(doc => ({\n        id: doc.id,\n         post: doc.data()\n         \n        }\n        \n        )));\n    })\n\n  },[]);\n\n\n  const signUp = (e) => {\n\n    e.preventDefault();\n    auth\n    .createUserWithEmailAndPassword(email,password)\n    .then((authUser) =>{\n      return authUser.user.updateProfile({\n        displayName: username\n      })\n    })\n    .catch((error) => {alert(error.message)});\n\n    setOpen(false);\n\n    \n  \n  }\n\n  const signIn = (e) =>{\n    e.preventDefault();\n\n    auth\n    .signInWithEmailAndPassword(email,password)\n    .catch((error) => alert(error.message));\n\n    setOpenSignIn(false);\n  }\n\n  return (\n    <div className=\"App\">\n\n{user?.displayName ? (\n        <div className=\"app__upload\">\n          <ImageUpload username={user.displayName} />\n        </div>\n      ) : (\n        <center>\n          <h3>Login to upload</h3>\n        </center>\n      )}\n\n<Modal\n        open={open}\n        onClose={() => setOpen(false)}>\n\n\n      <div style={modalStyle} className={classes.paper}>\n\n        <form className=\"app__signUp\">\n\n        <center>\n        <img alt=\"modalogo\" src=\"soapboxlogo.jpg\" />\n\n        </center>\n\n      <Input\n      placeholder=\"Username\"\n      type=\"text\"\n      value={username}\n      onChange={(e) => setUsername(e.target.value)}\n      />\n\n      <Input\n      placeholder=\"Email\"\n      type=\"email\"\n      value={email}\n      onChange={(e) => setEmail(e.target.value)}\n      />\n\n      <Input\n      placeholder=\"Password\"\n      type=\"password\"\n      value={password}\n      onChange={(e) => setPassword(e.target.value)}\n      />\n\n      <Button type=\"submit\" onClick={signUp}>Sign Up</Button>\n\n\n        </form>\n\n        </div>\n\n</Modal>\n\n<Modal\n        open={openSignIn}\n        onClose={() => setOpenSignIn(false)}>\n\n\n      <div style={modalStyle} className={classes.paper}>\n\n        <form className=\"app__signUp\">\n\n        <center>\n        <img alt=\"modalogo\" src=\"soapboxlogo.jpg\" />\n\n        </center>\n\n      <Input\n      placeholder=\"Email\"\n      type=\"email\"\n      value={email}\n      onChange={(e) => setEmail(e.target.value)}\n      />\n\n      <Input\n      placeholder=\"Password\"\n      type=\"password\"\n      value={password}\n      onChange={(e) => setPassword(e.target.value)}\n      />\n\n      <Button type=\"submit\" onClick={signIn}>Sign In</Button>\n\n\n        </form>\n\n        </div>\n\n</Modal>\n\n    <div className=\"app__header\">\n\n      <img className=\"app__headerImage\" src=\"soapboxlogo.svg\" alt=\"soapboxlogo\" />\n\n      {user ? (\n    <Button className=\"buttons\" onClick={() => auth.signOut()}>Logout</Button>\n    ): (\n      <div className=\"app__loginContainer\">\n        <Button className=\"buttons\" onClick={() => setOpenSignIn(true)}>Login</Button>\n        <Button className=\"buttons\" onClick={() => setOpen(true)}>Sign Up</Button>\n    </div>\n\n    )}\n\n\n</div>\n\n\n <div className=\"app__posts\">\n\n {\n\nposts.map(({id, post}) => (\n\n  <Post key={id} username= {post.username} caption = {post.caption} imageUrl = {post.imageUrl} />\n\n))\n\n}\n\n\n </div>\n\n\n     \n    \n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}